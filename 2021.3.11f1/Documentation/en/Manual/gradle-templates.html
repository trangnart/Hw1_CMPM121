<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script><script type="text/javascript">
					function OptanonWrapper() { }
				</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual:  Gradle templates</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://docs.unity3d.com/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20220923"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20220923"></script><script type="text/javascript" src="docdata/toc.js?ts=20220923"></script><script type="text/javascript" src="docdata/global_toc.js?ts=20220923"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20220923">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2021.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/gradle-templates.html">English</a></li>
<li><a href="/cn/current/Manual/gradle-templates.html">中文</a></li>
<li><a href="/ja/current/Manual/gradle-templates.html">日本語</a></li>
<li><a href="/es/current/Manual/gradle-templates.html">Español</a></li>
<li><a href="/kr/current/Manual/gradle-templates.html">한국어</a></li>
<li><a href="/ru/current/Manual/gradle-templates.html">Русский</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2021.3</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/gradle-templates.html">English</a></li>
<li><a href="/cn/current/Manual/gradle-templates.html">中文</a></li>
<li><a href="/ja/current/Manual/gradle-templates.html">日本語</a></li>
<li><a href="/es/current/Manual/gradle-templates.html">Español</a></li>
<li><a href="/kr/current/Manual/gradle-templates.html">한국어</a></li>
<li><a href="/ru/current/Manual/gradle-templates.html">Русский</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html"> Unity User Manual 2021.3 (LTS)</a></li>
<li><a href="PlatformSpecific.html">Platform development  </a></li>
<li><a href="android.html"> Android</a></li>
<li><a href="android-building-and-delivering.html"> Building and delivering for Android</a></li>
<li> Gradle templates</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="android-building-and-delivering.html"></a></span><div class="tip"> Building and delivering for Android</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="overriding-android-manifest.html"></a></span><div class="tip"> Override the Android App Manifest</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Gradle templates</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Gradle templates configure how to build an Android application using <span class="tooltip"><a class="tooltipMoreInfoLink" href="android-gradle-overview.html">Gradle</a><span class="tooltiptext">An Android build system that automates several build processes. This automation means that many common build errors are less likely to occur. <a href="android-gradle-overview.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Gradle">Glossary</a></span></span></span>. Each Gradle template represents a single Gradle project. Gradle projects can include, and depend on, other Gradle projects.</p>

<h2>Gradle template files</h2>

<p>A Gradle template consists of the following files:</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">File</th>
	<th style="text-align:left;">Location</th>
	<th style="text-align:left;">Contains</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><code>baseProjectTemplate.gradle</code></td>
	<td style="text-align:left;">In the exported project, <code>root/build.gradle</code> folder</td>
	<td style="text-align:left;">Configuration information that affects all modules in the final Gradle project. It specifies which Android Gradle Plugin version to use and locations of java plugins. The locations are a combination of online repositories and java plugins inside of this project.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>launcherTemplate.gradle_</code></td>
	<td style="text-align:left;">In the exported project, <code>root/launcher/build.gradle</code> folder</td>
	<td style="text-align:left;">Instructions on how to build the Android application. This includes bundling, signing, and whether to split the <span class="tooltip"><strong>apk</strong><span class="tooltiptext">The Android Package format output by Unity. An APK is automatically deployed to your device when you select File &gt; Build &amp; Run. <a class="tooltipMoreInfoLink" href="android-BuildProcess.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#APK">Glossary</a></span></span></span>. It depends on the unityLibrary project and outputs either an .apk file or an app bundle.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>mainTemplate.gradle</code></td>
	<td style="text-align:left;">In the exported project, <code>root/unityLibrary/build.gradle</code> folder</td>
	<td style="text-align:left;">Instructions on how to build Unity as a Library. This outputs an .aar file. You can override the Unity template with a custom template in the Unity Editor. See the Providing a custom Gradle build template section on this page for more details.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>libTemplate.gradle</code></td>
	<td style="text-align:left;">Varies</td>
	<td style="text-align:left;">If an <a class="tooltipMoreInfoLink" href="AndroidAARPlugins.html">Android Library Project</a> <span class="tooltip"><strong>plug-in</strong><span class="tooltiptext">A set of code created outside of Unity that creates functionality in Unity. There are two kinds of plug-ins you can use in Unity: Managed plug-ins (managed .NET assemblies created with tools like Visual Studio) and Native plug-ins (platform-specific native code libraries). <a href="Plugins.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Plug-in">Glossary</a></span></span></span> doesn’t include a <code>build.gradle</code> file, Unity uses the <code>libTemplate.gradle</code> file as a template to generate one. After Unity generates the <code>build.gradle</code> file, or if one already exists in the plug-in’s directory, Unity copies the plug-in into the Gradle project.</td>
</tr>
</tbody>
</table>

<p><a name="customizing-a-gradle-build"></a></p>

<h2>Using a custom Gradle template</h2>

<p>There are two <code>.gradle</code> files that control the Gradle build process for the unityLibrary module:</p>

<ul>
<li>
<code>build.gradle</code>: Specifies build instructions.</li>
<li>
<code>settings.gradle</code>: Contains the names of modules that the Gradle build system should include when it builds the project.project components that the instructions in the <code>build.gradle</code> file use in the build process.</li>
</ul>

<h3>build.gradle</h3>

<p>The <code>build.gradle</code> file contains template variables that specify build instructions.</p>

<p>By default, Unity uses the <code>mainTemplate.gradle</code> file from the Unity install directory to create the <code>build.gradle</code> file for the <a href="android-gradle-overview.html#unity-library">unityLibrary module</a>. To create your own <code>mainTemplate.gradle</code> file:</p>

<ol>
<li>Open the Project Settings window (menu: <strong>Edit</strong> &gt; <strong>Project Settings</strong>).</li>
<li>Select the <strong>Player</strong> tab then open <a href="class-PlayerSettingsAndroid.html">Android Player Settings</a>:<br><img src="../uploads/Main/android-player-settings-tab.png" alt="">
</li>
<li>In the <strong>Publishing Settings</strong> section, enable <strong>Custom Main Gradle Template</strong>. This creates a Gradle template file called <code>mainTemplate.gradle</code> and displays the path to the file. Unity now uses this <code>mainTemplate.gradle</code> file to create the <code>build.gradle</code> file. For a list of template variables and a description of what each does, see <a href="#template-variables">Template variables</a>.</li>
</ol>

<p><a name="template-variables"></a></p>

<h4>Template variables</h4>

<p>The <code>mainTemplate.gradle</code> file can contain the following variables:</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Variable</strong></th>
	<th style="text-align:left;"><strong>Description</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><strong>DEPS</strong></td>
	<td style="text-align:left;">The list of project <span class="tooltip"><strong>dependencies</strong><span class="tooltiptext">In the context of the Package Manager, a dependency is a specific package version (expressed in the form <code>package_name@package_version</code>) that a project or another package requires in order to work. Projects and packages use the <strong>dependencies</strong> attribute in their manifests to define the set of packages they require. For projects, these are considered <strong>direct</strong> dependencies; for packages, these are <strong>indirect</strong>, or transitive, dependencies. <a class="tooltipMoreInfoLink" href="upm-dependencies.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Dependency">Glossary</a></span></span></span>. This is the list of libraries that the project uses.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>APIVERSION</strong></td>
	<td style="text-align:left;">The API version to build for. Unity sets the and <strong>TARGETSDKVERSION</strong> to the same value (<strong>Target API Level</strong> in the <a href="class-PlayerSettingsAndroid.html">Android Player Settings</a>).</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>MINSDKVERSION</strong></td>
	<td style="text-align:left;">The minimum API version that supports the application.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>BUILDTOOLS</strong></td>
	<td style="text-align:left;">The SDK build tools to use.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>TARGETSDKVERSION</strong></td>
	<td style="text-align:left;">The API version to target. Unity sets the and <strong>APIVERSION</strong> to the same value (<strong>Target API Level</strong> in the <a href="class-PlayerSettingsAndroid.html">Android Player Settings</a>).</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>APPLICATIONID</strong></td>
	<td style="text-align:left;">Android Application ID. For example, com.mycompany.myapp.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>MINIFY_DEBUG</strong></td>
	<td style="text-align:left;">Indicates whether to minify debug builds.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>PROGUARD_DEBUG</strong></td>
	<td style="text-align:left;">Indicates whether to use ProGuard for minification in debug builds.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>MINIFY_RELEASE</strong></td>
	<td style="text-align:left;">Indicates whether to minify release builds.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>PROGUARD_RELEASE</strong></td>
	<td style="text-align:left;">Indicates whether to use ProGuard for minification in release builds.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>USER_PROGUARD</strong></td>
	<td style="text-align:left;">Specifies a custom ProGuard file to use for minification.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>SIGN</strong></td>
	<td style="text-align:left;">Complete the signingConfigs section if this build is signed.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>SIGNCONFIG</strong></td>
	<td style="text-align:left;">Indicates whether the build is signed. If this property is set to <code>signingConfig.release</code>, the build is signed.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>DIR_GRADLEPROJECT</strong></td>
	<td style="text-align:left;">The directory where Unity creates the Gradle project.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>DIR_UNITYPROJECT</strong></td>
	<td style="text-align:left;">The directory of your Unity project.</td>
</tr>
</tbody>
</table>

<h3>settings.gradle</h3>

<p>The <code>settings.gradle</code> file contains project components used in the build process.</p>

<p>By default, Unity uses the <code>settingsTemplate.gradle</code> file from the Unity install directory to create the <code>settings.gradle</code> file for your build. To create your own <code>settingsTemplate.gradle</code> file, create a <code>settingsTemplate.gradle</code> file in your project’s <code>Assets/Plugins/Android/</code> folder. This overrides the default template.</p>

<p>
<strong>I</strong>f you create a custom <code>settings.gradle</code> file, be aware of the following:</p>

<ul>
<li>Unity creates the <code>launcher</code> and <code>unityLibrary</code> components by default and you must include them in your <code>settingsTemplate.gradle</code> file. To do this, add <code>include ':launcher', ':unityLibrary'</code> as an entry to your <code>settingsTemplate.gradle</code>.</li>
<li>If you use Android Library plug-ins, Unity includes them in the final <code>settings.gradle</code> file by replacing the <code>**INCLUDES**</code> entry. This means you must add <code>**INCLUDES**</code> as an entry to your <code>settingsTemplate.gradle</code>.</li>
</ul>

<h2>Modifying the exported Gradle project using C#</h2>

<p>To modify the Gradle project after Unity assembles it, create a class that inherits from <a href="../ScriptReference/Android.IPostGenerateGradleAndroidProject.html">IPostGenerateGradleAndroidProject</a> and override the <a href="../ScriptReference/Android.IPostGenerateGradleAndroidProject.OnPostGenerateGradleAndroidProject.html">OnPostGenerateGradleAndroidProject</a> function. This function receives the path to the unityLibrary module as a parameter and you can use it to reach the application’s manifest and resources through C# scripting.</p>

<p>
<strong>Warning</strong>: Unity now uses an incremental build pipeline which means Unity reuses the same Gradle project for consecutive builds. This means that any modifications you do using this API accumulate since Unity no longer creates a new Gradle project for every build. For example, if you use this API to add an additional file to the Gradle project, the first build works as expected, but during the second build the file already exists. A second example is if you use this API to add a permission to a particular file. Each successive build adds another entry for the permission. It is crucial to make sure that modifications you want to make aren’t already present in the build.</p>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="android-building-and-delivering.html"></a></span><div class="tip"> Building and delivering for Android</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="overriding-android-manifest.html"></a></span><div class="tip"> Override the Android App Manifest</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2021 Unity Technologies. Publication Date: 2022-09-23.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
